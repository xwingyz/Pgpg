(function(n){n.validator.addMethod("tenancyNameRegex",function(n,t,i){return i.test(n)},app.localize("TenantName_Regex_Description"));app.modals.CreateTenantModal=function(){var r=abp.services.app.tenant,i=null,t;this.init=function(r){var u,e,f,o;t=r;i=t.getModal().find("form[name=TenantInformationsForm]");i.validate({rules:{TenancyName:{tenancyNameRegex:new RegExp(i.find("input[name=TenancyName]").attr("regex"))}}});u=t.getModal().find("input[name=AdminPassword],input[name=AdminPasswordRepeat]");e=u.closest(".form-group");n("#CreateTenant_SetRandomPassword").change(function(){n(this).is(":checked")?(e.slideUp("fast"),u.removeAttr("required")):(e.slideDown("fast"),u.attr("required","required"))});f=t.getModal().find("input[name=ConnectionString]");o=f.closest(".form-group");n("#CreateTenant_UseHostDb").change(function(){n(this).is(":checked")?(o.slideUp("fast"),f.removeAttr("required")):(o.slideDown("fast"),f.attr("required","required"))})};this.save=function(){if(i.valid()){var n=i.serializeFormToObject();n.SetRandomPassword&&(n.Password=null);n.UseHostDb&&(n.ConnectionString=null);t.setBusy(!0);r.createTenant(n).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));t.close();abp.event.trigger("app.createTenantModalSaved")}).always(function(){t.setBusy(!1)})}}}})(jQuery);