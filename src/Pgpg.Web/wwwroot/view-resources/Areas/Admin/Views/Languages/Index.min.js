(function(){$(function(){function e(n){r.setDefaultLanguage({name:n.name}).done(function(){t();abp.notify.success(app.localize("SuccessfullySaved"))})}function o(n){abp.message.confirm(app.localize("LanguageDeleteWarningMessage",n.displayName),function(i){i&&r.deleteLanguage({id:n.id}).done(function(){t();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function t(){i.jtable("load")}var i=$("#LanguagesTable"),r=abp.services.app.language,u=null,n={create:abp.auth.hasPermission("Pages.Administration.Languages.Create"),edit:abp.auth.hasPermission("Pages.Administration.Languages.Edit"),changeTexts:abp.auth.hasPermission("Pages.Administration.Languages.ChangeTexts"),"delete":abp.auth.hasPermission("Pages.Administration.Languages.Delete")},f=new app.ModalManager({viewUrl:abp.appPath+"Admin/Languages/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Languages/_CreateOrEditModal.js",modalClass:"CreateOrEditLanguageModal"});i.jtable({title:app.localize("Languages"),actions:{listAction:{method:r.getLanguages}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"30%",display:function(t){var i=$("<span><\/span>");return n.edit&&t.record.tenantId==abp.session.tenantId&&$('<button class="btn btn-default btn-xs" title="'+app.localize("Edit")+'"><i class="fa fa-edit"><\/i><\/button>').appendTo(i).click(function(){f.open({id:t.record.id})}),n.changeTexts&&$('<a href="'+abp.appPath+"Admin/Languages/Texts?languageName="+t.record.name+'" class="btn btn-default btn-xs" title="'+app.localize("ChangeTexts")+'"><i class="fa fa-bars"><\/i><\/a>').appendTo(i).click(function(){changeTexts(t.record)}),n.edit&&$('<button class="btn btn-default btn-xs" title="'+app.localize("SetAsDefaultLanguage")+'"><i class="fa fa-check"><\/i><\/button>').appendTo(i).click(function(){e(t.record)}),n.delete&&t.record.tenantId==abp.session.tenantId&&$('<button class="btn btn-default btn-xs" title="'+app.localize("Delete")+'"><i class="fa fa-trash-o"><\/i><\/button>').appendTo(i).click(function(){o(t.record)}),i}},displayName:{title:app.localize("Name"),width:"30%",display:function(n){var t=$("<span><\/span>");return t.append('<i class="'+n.record.icon+'"><\/i>'),t.append(" &nbsp; "),t.append('<span data-language-name="'+n.record.name+'">'+n.record.displayName+"<\/span>"),t}},name:{title:app.localize("Code"),width:"10%"},tenantId:{title:app.localize("Default")+"*",width:"10%",list:abp.session.tenantId?!0:!1,display:function(n){var t=$("<span><\/span>");return n.record.tenantId!=abp.session.tenantId?t.append('<span class="label label-default">'+app.localize("Yes")+"<\/span>"):t.append('<span class="label label-success">'+app.localize("No")+"<\/span>"),t}},creationTime:{title:app.localize("CreationTime"),width:"20%",display:function(n){return moment(n.record.creationTime).format("L")}}},recordsLoaded:function(n,t){u=t.serverResponse.originalResult.defaultLanguageName;i.find("[data-language-name="+u+"]").addClass("text-bold").append(" ("+app.localize("Default")+")")}});$("#CreateNewLanguageButton").click(function(){f.open()});abp.event.on("app.createOrEditLanguageModalSaved",function(){t()});t()})})();