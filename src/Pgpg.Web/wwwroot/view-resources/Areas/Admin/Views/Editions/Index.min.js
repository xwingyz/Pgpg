(function(){$(function(){function f(t){abp.message.confirm(app.localize("EditionDeleteWarningMessage",t.displayName),function(r){r&&i.deleteEdition({id:t.id}).done(function(){n();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function n(){t.jtable("load")}var t=$("#EditionsTable"),i=abp.services.app.edition,r={create:abp.auth.hasPermission("Pages.Editions.Create"),edit:abp.auth.hasPermission("Pages.Editions.Edit"),"delete":abp.auth.hasPermission("Pages.Editions.Delete")},u=new app.ModalManager({viewUrl:abp.appPath+"Admin/Editions/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Editions/_CreateOrEditModal.js",modalClass:"CreateOrEditEditionModal"});t.jtable({title:app.localize("Editions"),actions:{listAction:{method:i.getEditions}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"30%",display:function(n){var t=$("<span><\/span>");return r.edit&&$('<button class="btn btn-default btn-xs" title="'+app.localize("Edit")+'"><i class="fa fa-edit"><\/i><\/button>').appendTo(t).click(function(){u.open({id:n.record.id})}),r.delete&&$('<button class="btn btn-default btn-xs" title="'+app.localize("Delete")+'"><i class="fa fa-trash-o"><\/i><\/button>').appendTo(t).click(function(){f(n.record)}),t}},displayName:{title:app.localize("EditionName"),width:"35%"},creationTime:{title:app.localize("CreationTime"),width:"35%",display:function(n){return moment(n.record.creationTime).format("L")}}}});$("#CreateNewEditionButton").click(function(){u.open()});abp.event.on("app.createOrEditEditionModalSaved",function(){n()});n()})})();