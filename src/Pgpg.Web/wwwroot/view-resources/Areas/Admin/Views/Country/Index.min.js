(function(){$(function(){function f(t){abp.message.confirm(app.localize("CountryDeleteWarningMessage",t.name),function(r){r&&i.deleteCountry({id:t.id}).done(function(){n();abp.notify.success(app.localize("SuccessfullyDeleted"))})})}function n(){t.jtable("load")}var t=$("#CountriesTable"),i=abp.services.app.country,r={create:abp.auth.hasPermission("Pages.Administration.Countries.Create"),edit:abp.auth.hasPermission("Pages.Administration.Countries.Edit"),"delete":abp.auth.hasPermission("Pages.Administration.Countries.Delete")},u=new app.ModalManager({viewUrl:abp.appPath+"Admin/Countries/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Countries/_CreateOrEditModal.js",modalClass:"CreateOrEditCountryModal"});t.jtable({title:app.localize("Countries"),actions:{listAction:{method:i.getCountries}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"30%",display:function(n){var t=$("<span><\/span>");return r.edit&&$('<button class="btn btn-default btn-xs" title="'+app.localize("Edit")+'"><i class="fa fa-edit"><\/i><\/button>').appendTo(t).click(function(){u.open({id:n.record.id})}),!n.record.isStatic&&r.delete&&$('<button class="btn btn-default btn-xs" title="'+app.localize("Delete")+'"><i class="fa fa-trash-o"><\/i><\/button>').appendTo(t).click(function(){f(n.record)}),t}},name:{title:app.localize("CountryName"),width:"35%"},code:{title:app.localize("CountryCode"),width:"35%"},isActive:{title:app.localize("Active"),width:"9%",display:function(n){return n.record.isActive?'<span class="label label-success">'+app.localize("Yes")+"<\/span>":'<span class="label label-default">'+app.localize("No")+"<\/span>"}}}});$("#CreateNewCountryButton").click(function(){u.open()});$("#RefreshCountriesButton").click(function(t){t.preventDefault();n()});abp.event.on("app.createOrEditCountryModalSaved",function(){n()});n()})})();