(function(n){app.modals.CreateOrEditUserModal=function(){function r(){var i=[];return t.getModal().find(".user-role-checkbox-list input[type=checkbox]").each(function(){n(this).is(":checked")&&i.push(n(this).attr("name"))}),i}var u=abp.services.app.user,t,i=null;this.init=function(u){t=u;i=t.getModal().find("form[name=UserInformationsForm]");i.validate();var f=t.getModal().find("input[name=Password],input[name=PasswordRepeat]"),e=f.closest(".form-group");n("#EditUser_SetRandomPassword").change(function(){n(this).is(":checked")?(e.slideUp("fast"),t.getArgs().id||f.removeAttr("required")):(e.slideDown("fast"),t.getArgs().id||f.attr("required","required"))});t.getModal().find(".user-role-checkbox-list input[type=checkbox]").change(function(){n("#assigned-role-count").text(r().length)})};this.save=function(){if(i.valid()){var f=r(),n=i.serializeFormToObject();n.SetRandomPassword&&(n.Password=null);t.setBusy(!0);u.createOrUpdateUser({user:n,assignedRoleNames:f,sendActivationEmail:n.SendActivationEmail,SetRandomPassword:n.SetRandomPassword}).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));t.close();abp.event.trigger("app.createOrEditUserModalSaved")}).always(function(){t.setBusy(!1)})}}}})(jQuery);