(function(){app.modals.MySettingsModal=function(){var r=abp.services.app.profile,i=null,t,n=null;this.init=function(r){t=r;n=t.getModal().find("form[name=MySettingsModalForm]");n.validate();i=n.find("[name='Timezone']").val()};this.save=function(){if(n.valid()){var u=n.serializeFormToObject();t.setBusy(!0);r.updateCurrentUserProfile(u).done(function(){$("#HeaderCurrentUserName").text(u.UserName);abp.notify.info(app.localize("SavedSuccessfully"));t.close();var r=n.find("[name='Timezone']").val();abp.clock.provider.supportsMultipleTimezone&&i!==r&&abp.message.info(app.localize("TimeZoneSettingChangedRefreshPageNotification")).done(function(){window.location.reload()})}).always(function(){t.setBusy(!1)})}}}})();