(function(n){app.modals.LinkedAccountsModal=function(){function e(n){abp.ajax({url:abp.appPath+"Account/SwitchToLinkedAccount",data:JSON.stringify({targetUserId:n.id,targetTenantId:n.tenantId})})}function o(n){abp.message.confirm(app.localize("LinkedUserDeleteWarningMessage",n.username),function(i){i&&r.unlinkUser({userId:n.id,tenantId:n.tenantId}).done(function(){t();abp.notify.success(app.localize("SuccessfullyUnlinked"))})})}function t(){i.jtable("load")}var f,i=n("#LinkedAccountsTable"),r=abp.services.app.userLink,u;this.init=function(n){f=n};u=new app.ModalManager({viewUrl:abp.appPath+"Admin/Profile/LinkAccountModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Profile/_LinkAccountModal.js",modalClass:"LinkAccountModal"});n("#LinkNewAccountButton").click(function(){u.open({},function(){t()})});i.jtable({paging:!0,actions:{listAction:{method:r.getLinkedUsers}},fields:{id:{key:!0,list:!1},actions:{title:app.localize("Actions"),width:"20%",display:function(t){var i=n("<div><\/div>");return n('<button class="btn btn-xs btn-primary blue"><i class="icon-login"><\/i>'+app.localize("LogIn")+"<\/button>").appendTo(i).click(function(){e(t.record)}),i}},userName:{title:app.localize("UserName"),width:"70%",display:function(t){var i=n("<div><\/div>");return n("<span>"+app.getShownLinkedUserName(t.record)+"<\/span>").appendTo(i),i}},unlink:{title:app.localize("Delete"),width:"10%",display:function(t){var i=n("<span><\/span>");return n('<button class="btn btn-xs btn-danger red"><i class="icon-trash"><\/i><\/button>').appendTo(i).click(function(){o(t.record)}),i}}}});t()}})(jQuery);