(function(n){n.validator.setDefaults({highlight:function(t){n(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){n(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block help-block-validation-error",errorPlacement:function(t,i){n(i).closest(".form-group").append(t)}})})(jQuery),function(){app.modals.LookupModal=function(){function u(){var t=$.extend({filter:r.val()},n.getArgs().extraFilters);i.jtable("load",t)}function f(i){var r=t.canSelect(i);if(r){if(r===!0){n.setResult(i);n.close();return}r.then(function(t){t&&(n.setResult(i),n.close())})}}var n,t={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(){return!0}},i,r;this.init=function(e){n=e;t=$.extend(t,n.getOptions().lookupOptions);i=n.getModal().find(".lookup-modal-table");i.jtable({title:t.title,paging:!0,pageSize:t.pageSize,actions:{listAction:{method:t.serviceMethod}},fields:{select:{title:app.localize("Select"),width:"10%",display:function(n){var t=$("<span><\/span>");return $('<button class="btn btn-default btn-xs" title="'+app.localize("Select")+'"><i class="fa fa-check"><\/i><\/button>').appendTo(t).click(function(){f(n.record)}),t}},name:{title:app.localize("Name"),width:"90%"}}});n.getModal().find(".lookup-filter-button").click(function(n){n.preventDefault();u()});n.getModal().find(".modal-body").keydown(function(n){n.which==13&&(n.preventDefault(),u())});r=n.getModal().find(".lookup-filter-text");r.val(t.filterText);t.loadOnStartup&&u()}};app.modals.LookupModal.create=function(n){return new app.ModalManager({viewUrl:abp.appPath+"Admin/Common/LookupModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Common/Modals/_LookupModal.js",modalClass:"LookupModal",lookupOptions:n})}}();
