var app=app||{};(function(){app.UserNotificationHelper=function(){return function(){function t(n){switch(n.notification.notificationName){case"App.NewUserRegistered":return"/Admin/users?filterText="+n.notification.data.properties.emailAddress;case"App.NewTenantRegistered":return"/Admin/tenants?filterText="+n.notification.data.properties.tenancyName}return null}var n=abp.services.app.notification,i=function(n,i){var r={userNotificationId:n.id,text:abp.notifications.getFormattedMessageFromUserNotification(n),time:moment(n.notification.creationTime).format("YYYY-MM-DD HH:mm:ss"),icon:app.notification.getUiIconBySeverity(n.notification.severity),state:abp.notifications.getUserNotificationStateAsString(n.state),data:n.notification.data,url:t(n),isUnread:n.state===abp.notifications.userNotificationState.UNREAD,timeAgo:moment(n.notification.creationTime).fromNow()};return(i||i===undefined)&&(r.text=abp.utils.truncateStringWithPostfix(r.text,100)),r},r=function(n){abp.notifications.showUiNotifyForUserNotification(n,{onclick:function(){var i=t(n);i&&(location.href=i)}})},u=function(t){n.setAllNotificationsAsRead().done(function(){abp.event.trigger("app.notifications.refresh");t&&t()})},f=function(t,i){n.setNotificationAsRead({id:t}).done(function(){abp.event.trigger("app.notifications.read",t);i&&i(t)})},e=function(){new app.ModalManager({viewUrl:abp.appPath+"Admin/Notifications/SettingsModal",scriptUrl:abp.appPath+"view-resources/Areas/Admin/Views/Notifications/_SettingsModal.js",modalClass:"NotificationSettingsModal"}).open()};return{format:i,show:r,setAllAsRead:u,setAsRead:f,openSettingsModal:e}}}()})(jQuery);app=app||{},function(){$.extend(app,{consts:{grid:{defaultPageSize:10,defaultPageSizes:[10,20,50,100]},userManagement:{defaultAdminUserName:"admin"},contentTypes:{formUrlencoded:"application/x-www-form-urlencoded; charset=UTF-8"},friendshipState:{accepted:1,blocked:2}}})}();app=app||{},function(){var n=abp.localization.getSource("Pgpg");app.localize=function(){return n.apply(this,arguments)};app.downloadTempFile=function(n){location.href=abp.appPath+"File/DownloadTempFile?fileType="+n.fileType+"&fileToken="+n.fileToken+"&fileName="+n.fileName};app.createDateRangePickerOptions=function(){var n={locale:{format:"L",applyLabel:app.localize("Apply"),cancelLabel:app.localize("Cancel"),customRangeLabel:app.localize("CustomRange")},min:moment("2015-05-01"),minDate:moment("2015-05-01"),max:moment(),maxDate:moment(),ranges:{}};return n.ranges[app.localize("Today")]=[moment().startOf("day"),moment().endOf("day")],n.ranges[app.localize("Yesterday")]=[moment().subtract(1,"days").startOf("day"),moment().subtract(1,"days").endOf("day")],n.ranges[app.localize("Last7Days")]=[moment().subtract(6,"days").startOf("day"),moment().endOf("day")],n.ranges[app.localize("Last30Days")]=[moment().subtract(29,"days").startOf("day"),moment().endOf("day")],n.ranges[app.localize("ThisMonth")]=[moment().startOf("month"),moment().endOf("month")],n.ranges[app.localize("LastMonth")]=[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],n};app.getUserProfilePicturePath=function(n){return n?abp.appPath+"Profile/GetProfilePictureById?id="+n:abp.appPath+"Common/Images/default-profile-picture.png"};app.getUserProfilePicturePath=function(){return abp.appPath+"Profile/GetProfilePicture?v="+(new Date).valueOf()};app.getShownLinkedUserName=function(n){return abp.multiTenancy.isEnabled?n.tenancyName?n.tenancyName+"\\"+n.username:".\\"+n.username:n.userName};app.notification=app.notification||{};app.notification.getUiIconBySeverity=function(n){switch(n){case abp.notifications.severity.SUCCESS:return"fa fa-check";case abp.notifications.severity.WARN:return"fa fa-warning";case abp.notifications.severity.ERROR:return"fa fa-bolt";case abp.notifications.severity.FATAL:return"fa fa-bomb";case abp.notifications.severity.INFO:default:return"fa fa-info"}};app.changeNotifyPosition=function(n){toastr&&(toastr.clear(),toastr.options.positionClass=n)};app.waitUntilElementIsReady=function(n,t,i){var r,u;$&&(r=n.split(",").length,i||(i=100),u=setInterval(function(){$(n).length>=r&&(clearInterval(u),t())},i))};app.calculateTimeDifference=function(n,t,i){if(!moment)return null;var r=moment(n),u=moment(t);return u.diff(r,i)}}(),function(n){n&&(n.fn.buttonBusy=function(t){return n(this).each(function(){var i=n(this),r=i.find("i"),u=i.find("span");if(t){if(i.hasClass("button-busy"))return;i.attr("disabled","disabled");r.length&&(i.data("iconOriginalClasses",r.attr("class")),r.removeClass(),r.addClass("fa fa-spin fa-spinner"));u.length&&i.attr("busy-text")&&(i.data("buttonOriginalText",u.html()),u.html(i.attr("busy-text")));i.addClass("button-busy")}else{if(!i.hasClass("button-busy"))return;i.removeAttr("disabled");r.length&&i.data("iconOriginalClasses")&&(r.removeClass(),r.addClass(i.data("iconOriginalClasses")));u.length&&i.data("buttonOriginalText")&&u.html(i.data("buttonOriginalText"));i.removeClass("button-busy")}})},n.fn.serializeFormToObject=function(){var i=n(this).serializeArray(),t;return n(":disabled[name]",this).each(function(){i.push({name:this.name,value:n(this).val()})}),t={},i.map(function(n){t[n.name]=n.value}),t})}(jQuery),function(){abp.clock.provider.supportsMultipleTimezone&&window.moment&&moment.tz.setDefault(abp.timing.timeZoneInfo.iana.timeZoneId);abp.libs.sweetAlert&&(abp.libs.sweetAlert.config.info.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.success.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.warn.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.error.confirmButtonText=app.localize("Ok"),abp.libs.sweetAlert.config.confirm.confirmButtonText=app.localize("Yes"),abp.libs.sweetAlert.config.confirm.cancelButtonText=app.localize("Cancel"))}();app=app||{},function(n){var t=[];app.modals=app.modals||{};app.ModalManager=function(){function i(t){var r=t+"Container",u="#"+r,i=n(u);i.length&&i.remove()}function u(t){i(t);var r=t+"Container";return n('<div id="'+r+'"><\/div>').append('<div id="'+t+'" class="modal fade" tabindex="-1" role="modal" aria-hidden="true">  <div class="modal-dialog">    <div class="modal-content"><\/div>  <\/div><\/div>').appendTo("body")}var r=function(n){n.modalId||(n.modalId="Modal_"+Math.floor(Math.random()*1e6)+(new Date).getTime())};return function(f){function v(){o&&o.save&&o.save()}function y(){e=n(b);e.modal({backdrop:"static"});e.on("hidden.bs.modal",function(){i(h);for(var n=0;n<a.length;n++)a[n]()});e.on("shown.bs.modal",function(){e.find("input:not([type=hidden]):first").focus()});var t=app.modals[f.modalClass];t&&(o=new t,o.init&&o.init(c,s));e.find(".save-button").click(function(){v()});e.find(".modal-body").keydown(function(n){n.which==13&&(n.preventDefault(),v())});e.modal("show")}function g(n){e&&e.find(".modal-footer button").buttonBusy(n)}r(f);var w=f,e=null,h=f.modalId,b="#"+h,o=null,c=null,s=null,l=null,a=[];var p=function(i,r){s=i||{};l=r;u(h).find(".modal-content").load(f.viewUrl,s,function(i,r){if(r=="error"){abp.message.warn(abp.localization.abpWeb("InternalServerError"));return}f.scriptUrl&&_.indexOf(t,f.scriptUrl)<0?n.getScript(f.scriptUrl).done(function(){t.push(f.scriptUrl);y()}).fail(function(){abp.message.warn(abp.localization.abpWeb("InternalServerError"))}):y()})},k=function(){e&&e.modal("hide")},d=function(n){a.push(n)};return c={open:p,reopen:function(){p(s)},close:k,getModalId:function(){return h},getModal:function(){return e},getArgs:function(){return s},getOptions:function(){return w},setBusy:g,setResult:function(){l&&l.apply(c,arguments)},onClose:d}}}()}(jQuery),function(){app.PasswordComplexityHelper=function(){function n(n,t){if(n&&n.charAt(0)!==n.charAt(0).toLowerCase())this[n.charAt(0).toLowerCase()+n.slice(1)]=t;else return t}var t=function(n){var t="<ul>";return n.minLength&&(t+="<li>"+abp.utils.formatString(app.localize("PasswordComplexity_MinLength_Hint"),n.minLength)+"<\/li>"),n.maxLength&&(t+="<li>"+abp.utils.formatString(app.localize("PasswordComplexity_MaxLength_Hint"),n.maxLength)+"<\/li>"),n.useUpperCaseLetters&&(t+="<li>"+app.localize("PasswordComplexity_UseUpperCaseLetters_Hint")+"<\/li>"),n.useLowerCaseLetters&&(t+="<li>"+app.localize("PasswordComplexity_UseLowerCaseLetters_Hint")+"<\/li>"),n.useNumbers&&(t+="<li>"+app.localize("PasswordComplexity_UseNumbers_Hint")+"<\/li>"),n.usePunctuations&&(t+="<li>"+app.localize("PasswordComplexity_UsePunctuations_Hint")+"<\/li>"),t+"<\/ul>"},i=function(i,r){if(r=JSON.parse(JSON.stringify(r),n),r){var u=t(r);jQuery.validator.addMethod("passwordComplexity",function(n){return n.length<r.minLength?!1:n.length>r.maxLength?!1:r.useUpperCaseLetters&&!/[A-Z]/.test(n)?!1:r.useUpperCaseLetters&&!/[a-z]/.test(n)?!1:r.useNumbers&&!/[0-9]/.test(n)?!1:r.usePunctuations&&!/[!@#\$%\^\&*'"\/{}\[\]?,;|)\(+=._-]+/.test(n)?!1:!0},u);i.rules("add","passwordComplexity")}};return{setPasswordComplexityRules:i}}}();app=app||{},function(){app.utils=app.utils||{};app.utils.truncateString=function(n,t,i){return!n||!t||n.length<=t?n:i===!1?n.substr(0,t):n.substr(0,t-1)+"&#133;"}}();app=app||{},function(){app.chat=app.chat||{};app.chat.side={sender:1,receiver:2};app.chat.readState={unread:1,read:2};app.chat.sendMessage=function(){console.log(arguments)}}();app=app||{},function(n){if(n&&n.connection){app.signalr=app.signalr||{};app.signalr.hubs=app.signalr.hubs||{};app.signalr.hubs.chat=app.signalr.hubs.chat||n.connection.chatHub;var t=app.signalr.hubs.chat;t&&(n.connection.hub.stateChanged(function(t){t.newState===n.connection.connectionState.connected&&abp.event.trigger("app.chat.connected")}),t.client.getChatMessage=function(n){abp.event.trigger("app.chat.messageReceived",n)},t.client.getAllFriends=function(n){abp.event.trigger("abp.chat.friendListChanged",n)},t.client.getFriendshipRequest=function(n,t){abp.event.trigger("app.chat.friendshipRequestReceived",n,t)},t.client.getUserConnectNotification=function(n,t){abp.event.trigger("app.chat.userConnectionStateChanged",{friend:n,isConnected:t})},t.client.getUserStateChange=function(n,t){abp.event.trigger("app.chat.userStateChanged",{friend:n,state:t})},t.client.getallUnreadMessagesOfUserRead=function(n){abp.event.trigger("app.chat.allUnreadMessagesOfUserRead",{friend:n})},app.chat.sendMessage=function(i,r){if(n.connection.hub.state!==n.signalR.connectionState.connected){r&&r();abp.notify.warn(app.localize("ChatIsNotConnectedWarning"));return}t.server.sendMessage(i).done(function(n){n&&abp.notify.warn(n)}).always(function(){r&&r()})})}}(jQuery);app=app||{},function(){app.localStorage=app.localStorage||{};app.localStorage.setItem=function(n,t){localStorage&&localStorage.setItem(n,JSON.stringify(t))};app.localStorage.getItem=function(n,t){if(!localStorage)return null;var i=localStorage.getItem(n);if(t)t(i);else return i}}();app=app||{},function(){app.localStorage=app.localStorage||{};app.localStorage.setItem=function(n,t){localforage&&localforage.setItem(n,t)};app.localStorage.getItem=function(n,t){localforage&&t&&localforage.getItem(n).then(function(n){t(n)})}}();
